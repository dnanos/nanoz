<% if can? :create, Comment %>

  <%= form_for [@commentable, @comment] do |f| %>
    <% if @comment.errors.any? %>
      <div class="error_messages">
	<h2>Please correct the following errors.</h2>
	<ul>
	<% @comment.errors.full_messages.each do |msg| %>
	  <li><%= msg %></li>
	<% end %>
	</ul>
      </div>
    <% end %>

    <div class="field">
      <%= f.text_area :content, rows: 8 %>
    </div>
    <div class="actions">
      <%= f.submit "Комментировать" %>
    </div>
  <% end %>

<% else %>
  <i>Чтобы оставить свое мнение, необходимо <%= link_to 'войти', new_user_session_path %> или <%= link_to 'зарегистрироваться', new_user_registration_path %>.</i>
<% end %>